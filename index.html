<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß† LA PROGRAMMAZIONE DINAMICA - Piattaforma di Apprendimento Avanzata</title>
    
    <!-- Font Awesome per icone -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Prism.js per syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    
    <!-- Chart.js per visualizzazioni -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Pyodide per esecuzione Python nel browser -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    
    <!-- D3.js per visualizzazioni interattive -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- CSS Personalizzato -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Caricamento ambiente Python...</h3>
            <p>Preparazione dell'esperienza di apprendimento interattiva</p>
        </div>
    </div>

    <div class="container">
        <!-- Top Navigation -->
        <nav class="top-nav">
            <div class="nav-left">
                <h3 style="margin: 0;">üß† Programmazione Dinamica</h3>
                <div class="mode-selector">
                    <button class="mode-btn active" onclick="setMode('learn')">
                        <i class="fas fa-book"></i> Apprendi
                    </button>
                    <button class="mode-btn" onclick="setMode('practice')">
                        <i class="fas fa-dumbbell"></i> Pratica
                    </button>
                    <button class="mode-btn" onclick="setMode('review')">
                        <i class="fas fa-history"></i> Ripasso
                    </button>
                </div>
            </div>
            <div class="nav-right">
                <button class="btn btn-info" onclick="showShortcuts()">
                    <i class="fas fa-keyboard"></i> Shortcuts
                </button>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-moon" id="themeIcon"></i>
                </button>
            </div>
        </nav>

        <!-- Hero Header -->
        <header class="hero-header" id="heroHeader">
            <h1>üß† LA PROGRAMMAZIONE DINAMICA</h1>
            <p class="subtitle">Il Viaggio nella Mente dei Geni</p>
            <p class="subtitle">"Come i Matematici hanno Scoperto il Segreto per Non Ripetere Mai lo Stesso Calcolo"</p>
            <p class="author">- Richard Bellman, 1953 -</p>
        </header>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Left Sidebar - Chapter Navigation -->
            <aside class="chapter-sidebar">
                <h4 style="margin-bottom: 20px;">üìö Capitoli</h4>
                <ul class="chapter-list">
                    <li class="chapter-item">
                        <a class="chapter-link active" data-chapter="prologo" onclick="loadChapter('prologo')">
                            <i class="fas fa-book-open"></i>
                            <span style="margin-left: 10px;">PROLOGO</span>
                        </a>
                    </li>
                    <li class="chapter-item">
                        <a class="chapter-link" data-chapter="cap1" onclick="loadChapter('cap1')">
                            <i class="fas fa-lightbulb"></i>
                            <span style="margin-left: 10px;">La Nascita dell'Idea</span>
                        </a>
                    </li>
                    <li class="chapter-item">
                        <a class="chapter-link" data-chapter="cap2" onclick="loadChapter('cap2')">
                            <i class="fas fa-flask"></i>
                            <span style="margin-left: 10px;">L'Anatomia della DP</span>
                        </a>
                    </li>
                    <li class="chapter-item">
                        <a class="chapter-link" data-chapter="cap3" onclick="loadChapter('cap3')">
                            <i class="fas fa-brain"></i>
                            <span style="margin-left: 10px;">Il Metodo SPAZIO</span>
                        </a>
                    </li>
                    <li class="chapter-item">
                        <a class="chapter-link" data-chapter="cap4" onclick="loadChapter('cap4')">
                            <i class="fas fa-puzzle-piece"></i>
                            <span style="margin-left: 10px;">Pattern Visivi</span>
                        </a>
                    </li>
                    <li class="chapter-item">
                        <a class="chapter-link" data-chapter="cap5" onclick="loadChapter('cap5')">
                            <i class="fas fa-rocket"></i>
                            <span style="margin-left: 10px;">Dalla Teoria alla Pratica</span>
                        </a>
                    </li>
                    <li class="chapter-item">
                        <a class="chapter-link" data-chapter="cap6" onclick="loadChapter('cap6')">
                            <i class="fas fa-hat-wizard"></i>
                            <span style="margin-left: 10px;">I Trucchi dei Maestri</span>
                        </a>
                    </li>
                    <li class="chapter-item">
                        <a class="chapter-link" data-chapter="epilogo" onclick="loadChapter('epilogo')">
                            <i class="fas fa-flag-checkered"></i>
                            <span style="margin-left: 10px;">EPILOGO</span>
                        </a>
                    </li>
                </ul>

                <!-- Quick Practice -->
                <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
                    <h4 style="margin-bottom: 15px;">‚ö° Pratica Veloce</h4>
                    <button class="btn btn-info" style="width: 100%;" onclick="startQuickPractice()">
                        <i class="fas fa-play"></i> Problema Random
                    </button>
                </div>
            </aside>

            <!-- Content Area -->
            <main class="content-area">
                <!-- Learn Mode Content -->
                <div id="learnMode" class="mode-content">
                    <!-- Prologo -->
                    <div id="prologo" class="chapter-content active">
                        <h2>üìñ PROLOGO: LA STORIA CHE CAMBI√í TUTTO</h2>
                        
                        <section>
                            <h3>1943 - Il Problema che Ossessionava Richard Bellman</h3>
                            
                            <p>Immagina di essere un giovane matematico durante la Seconda Guerra Mondiale. Il tuo compito? Ottimizzare le traiettorie dei missili. Ogni calcolo richiede ore. E poi ti accorgi di una cosa assurda...</p>
                            
                            <div class="insight-box">
                                <p><strong>"Sto calcolando la stessa maledetta cosa 100 volte!"</strong></p>
                                <p style="text-align: right;">- Richard Bellman (probabilmente)</p>
                            </div>

                            <h3>üé® La Rivelazione Visiva</h3>
                            <p>Quello che vedeva Bellman quando calcolava F(5):</p>
                            
                            <div class="ascii-art">
Per calcolare F(5):
                    F(5)
                   /    \
                F(4)     F(3)
               /    \    /   \
            F(3)    F(2) F(2) F(1)
            /  \
         F(2)  F(1)

CONTA I NODI: F(3) calcolato 2 volte!
              F(2) calcolato 3 volte!

üí° L'ILLUMINAZIONE: "E se... ricordassi?"
                            </div>
                            
                            <div class="question-box">
                                <h4>üìä Il Disastro Esponenziale</h4>
                                <p>Visualizzazione delle chiamate per F(6):</p>
                                <div style="font-family: monospace; margin: 15px 0;">
                                    F(1): ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà (8 volte)<br>
                                    F(2): ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà (13 volte)<br> 
                                    F(3): ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà (8 volte)<br>
                                    F(4): ‚ñà‚ñà‚ñà‚ñà‚ñà (5 volte)<br>
                                    F(5): ‚ñà‚ñà‚ñà (3 volte)<br>
                                    F(6): ‚ñà (1 volta)<br>
                                    <br>
                                    <strong>Totale: 38 chiamate per 6 valori!</strong>
                                </div>
                            </div>
                            
                            <!-- Interactive Visualization -->
                            <div class="dp-visualizer">
                                <h4>üé® Visualizzazione Interattiva: Il Problema di Fibonacci</h4>
                                <div class="vis-controls">
                                    <button class="btn btn-info" onclick="startFibVisualization()">
                                        <i class="fas fa-play"></i> Avvia Animazione
                                    </button>
                                    <button class="btn btn-warning" onclick="resetFibVisualization()">
                                        <i class="fas fa-redo"></i> Reset
                                    </button>
                                    <input type="range" min="1" max="10" value="5" id="fibSlider" oninput="updateFibVisualization(this.value)">
                                    <span id="fibValue">F(5)</span>
                                </div>
                                <div class="vis-canvas" id="fibCanvas"></div>
                            </div>
                            
                            <!-- Active Recall Exercise -->
                            <div class="recall-exercise">
                                <h4 class="recall-prompt">üìù Active Recall: Spiega con parole tue</h4>
                                <p>Perch√© calcolare Fibonacci ricorsivamente √® inefficiente?</p>
                                <textarea class="recall-input" id="recall-fib" placeholder="Scrivi la tua spiegazione qui..."></textarea>
                                <button class="btn btn-info" onclick="checkRecall('fib')">
                                    <i class="fas fa-check"></i> Verifica Comprensione
                                </button>
                                <div id="recall-fib-feedback" style="margin-top: 15px; display: none;"></div>
                            </div>
                            
                            <!-- Python Interactive Exercise -->
                            <div class="python-editor-advanced">
                                <div class="editor-header">
                                    <div class="editor-title">
                                        <i class="fas fa-code"></i>
                                        Esercizio: Fibonacci Ricorsivo vs Memorizzato
                                    </div>
                                    <div class="editor-actions">
                                        <button class="btn btn-run" onclick="runPythonCode('fib-comparison')">
                                            <i class="fas fa-play"></i> Esegui
                                        </button>
                                        <button class="btn btn-test" onclick="runTests('fib-comparison')">
                                            <i class="fas fa-vial"></i> Test
                                        </button>
                                        <button class="btn btn-solution" onclick="showSolution('fib-comparison')">
                                            <i class="fas fa-lightbulb"></i> Soluzione
                                        </button>
                                    </div>
                                </div>
                                <div class="editor-container">
                                    <div class="editor-pane">
                                        <textarea id="fib-comparison-code" class="editor-textarea">import time

def fibonacci_ricorsivo(n):
    """Implementa Fibonacci in modo ricorsivo (inefficiente)"""
    # TODO: Implementa la versione ricorsiva
    pass

def fibonacci_memo(n, memo=None):
    """Implementa Fibonacci con memoization"""
    if memo is None:
        memo = {}
    
    # TODO: Implementa la versione con memoization
    pass

# Test di performance
def test_performance():
    n = 35
    
    # Test ricorsivo
    start = time.time()
    result1 = fibonacci_ricorsivo(n)
    time1 = time.time() - start
    
    # Test memoization
    start = time.time()
    result2 = fibonacci_memo(n)
    time2 = time.time() - start
    
    print(f"Fibonacci({n}):")
    print(f"  Ricorsivo: {result1} in {time1:.4f} secondi")
    print(f"  Memoization: {result2} in {time2:.4f} secondi")
    print(f"  Speedup: {time1/time2:.0f}x pi√π veloce!")

# Esegui test
test_performance()</textarea>
                                    </div>
                                    <div class="editor-pane">
                                        <div class="test-results" id="fib-comparison-output">
                                            <div style="color: #94a3b8;">
                                                <i class="fas fa-terminal"></i> Output apparir√† qui...
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Worked Example -->
                            <div class="worked-example">
                                <h4>üìö Esempio Guidato: Costruiamo la Memoization Passo-Passo</h4>
                                <div class="example-steps">
                                    <div class="example-step">
                                        <h5>Passo 1: Identifica il Problema</h5>
                                        <p>Nella versione ricorsiva, F(5) chiama F(4) e F(3), ma F(4) chiama anche F(3)...</p>
                                        <div class="ascii-art">F(5)
‚îú‚îÄ‚îÄ F(4)
‚îÇ   ‚îú‚îÄ‚îÄ F(3)
‚îÇ   ‚îî‚îÄ‚îÄ F(2)
‚îî‚îÄ‚îÄ F(3)  ‚Üê Calcolato di nuovo!
    ‚îú‚îÄ‚îÄ F(2)  ‚Üê Anche questo!
    ‚îî‚îÄ‚îÄ F(1)</div>
                                    </div>
                                    <div class="example-step step-hidden" onclick="revealStep(this)">
                                        <div class="step-reveal">Clicca per rivelare</div>
                                        <h5>Passo 2: Aggiungi una Cache</h5>
                                        <pre><code>memo = {}  # Dizionario per memorizzare risultati

def fib_memo(n):
    if n in memo:  # Gi√† calcolato?
        return memo[n]  # Restituisci subito!</code></pre>
                                    </div>
                                    <div class="example-step step-hidden" onclick="revealStep(this)">
                                        <div class="step-reveal">Clicca per rivelare</div>
                                        <h5>Passo 3: Memorizza i Risultati</h5>
                                        <pre><code>    # Calcola normalmente
    if n <= 1:
        result = n
    else:
        result = fib_memo(n-1) + fib_memo(n-2)
    
    memo[n] = result  # Salva per il futuro!
    return result</code></pre>
                                    </div>
                                </div>
                            </div>

                            <!-- Auto-explanation -->
                            <div class="explanation-box">
                                <div class="explanation-prompt">
                                    üí≠ Rifletti: Come spiegheresti la memoization a un amico?
                                </div>
                                <textarea class="explanation-field" id="explain-memo" 
                                    placeholder="Usa un'analogia o un esempio dalla vita quotidiana..."></textarea>
                                <button class="btn btn-info" onclick="saveExplanation('memo')">
                                    <i class="fas fa-save"></i> Salva Riflessione
                                </button>
                            </div>
                        </section>
                    </div>

                    <!-- Capitolo 1 -->
                    <div id="cap1" class="chapter-content">
                        <h2>üèõÔ∏è CAPITOLO 1: LA NASCITA DI UN'IDEA RIVOLUZIONARIA</h2>
                        
                        <section>
                            <h3>Le 3 Domande Fondamentali che si Pose Bellman</h3>
                            
                            <div class="question-box">
                                <h4>ü§î Domanda 1: "Perch√© Ricalcolo?"</h4>
                            </div>
                            
                            <!-- Interactive Calculation Tracker -->
                            <div class="dp-visualizer">
                                <h4>Tracciatore di Calcoli Ripetuti</h4>
                                <p>Esegui fibonacci(6) e osserva quante volte viene calcolato ogni valore:</p>
                                <div class="vis-controls">
                                    <button class="btn btn-info" onclick="trackFibonacciCalls()">
                                        <i class="fas fa-calculator"></i> Traccia Calcoli
                                    </button>
                                </div>
                                <div id="callTracker" style="margin-top: 20px;">
                                    <canvas id="callChart" width="400" height="300"></canvas>
                                </div>
                            </div>

                            <div class="question-box">
                                <h4>ü§î Domanda 2: "Cosa Hanno in Comune i Sottoproblemi?"</h4>
                            </div>
                            
                            <div class="insight-box">
                                <p><strong>L'INTUIZIONE GENIALE:</strong></p>
                                <p>"Aspetta... F(3) √® SEMPRE 2, non importa se lo calcolo per F(4) o per F(5)!"</p>
                            </div>

                            <!-- Pattern Recognition Exercise -->
                            <div class="recall-exercise">
                                <h4 class="recall-prompt">üîç Riconoscimento Pattern</h4>
                                <p>Osserva questi problemi. Quali hanno sottostruttura ottima?</p>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                                    <div class="practice-option" onclick="checkPattern(this, true)">
                                        <strong>Percorso Minimo in Griglia</strong>
                                        <p>Dal punto A al punto B in una griglia</p>
                                    </div>
                                    <div class="practice-option" onclick="checkPattern(this, false)">
                                        <strong>Ordinamento Array</strong>
                                        <p>Ordinare numeri dal pi√π piccolo al pi√π grande</p>
                                    </div>
                                    <div class="practice-option" onclick="checkPattern(this, true)">
                                        <strong>Zaino 0-1</strong>
                                        <p>Massimizzare valore con peso limitato</p>
                                    </div>
                                    <div class="practice-option" onclick="checkPattern(this, false)">
                                        <strong>Ricerca Binaria</strong>
                                        <p>Trovare elemento in array ordinato</p>
                                    </div>
                                </div>
                                <div id="pattern-feedback" style="margin-top: 15px; display: none;"></div>
                            </div>

                            <div class="question-box">
                                <h4>ü§î Domanda 3: "Come Posso Ricordare?"</h4>
                            </div>

                            <!-- Memory Strategies Interactive -->
                            <div class="python-editor-advanced">
                                <div class="editor-header">
                                    <div class="editor-title">
                                        <i class="fas fa-memory"></i>
                                        Esplora Strategie di Memorizzazione
                                    </div>
                                    <div class="editor-actions">
                                        <button class="btn btn-run" onclick="runPythonCode('memory-strategies')">
                                            <i class="fas fa-play"></i> Esegui
                                        </button>
                                        <button class="btn btn-test" onclick="runTests('memory-strategies')">
                                            <i class="fas fa-vial"></i> Test
                                        </button>
                                    </div>
                                </div>
                                <div class="editor-container">
                                    <div class="editor-pane">
                                        <textarea id="memory-strategies-code" class="editor-textarea"># Confrontiamo diverse strategie di memorizzazione

# Strategia 1: Lista (array)
def fib_con_lista(n):
    if n <= 1:
        return n
    
    # Crea lista di dimensione n+1
    dp = [0] * (n + 1)
    dp[0] = 0
    dp[1] = 1
    
    # TODO: Riempi la lista
    # for i in range(2, n + 1):
    #     dp[i] = ???
    
    return dp[n]

# Strategia 2: Dizionario (hash map)
def fib_con_dizionario(n, memo={}):
    # TODO: Implementa usando dizionario
    pass

# Strategia 3: Solo ultimi 2 valori (ottimizzata)
def fib_ottimizzata(n):
    if n <= 1:
        return n
    
    # TODO: Usa solo due variabili
    # prev2, prev1 = 0, 1
    # for i in range(2, n + 1):
    #     current = ???
    #     prev2, prev1 = ???, ???
    
    pass

# Test memoria utilizzata
import sys

def test_memoria():
    n = 100
    
    # Test lista
    lista = [0] * (n + 1)
    print(f"Memoria lista: {sys.getsizeof(lista)} bytes")
    
    # Test dizionario
    dizionario = {i: i for i in range(n + 1)}
    print(f"Memoria dizionario: {sys.getsizeof(dizionario)} bytes")
    
    # Test 2 variabili
    a, b = 0, 1
    print(f"Memoria 2 variabili: {sys.getsizeof(a) + sys.getsizeof(b)} bytes")

test_memoria()</textarea>
                                    </div>
                                    <div class="editor-pane">
                                        <div class="test-results" id="memory-strategies-output">
                                            <div style="color: #94a3b8;">
                                                <i class="fas fa-terminal"></i> Output apparir√† qui...
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Capitolo 2 -->
                    <div id="cap2" class="chapter-content">
                        <h2>üî¨ CAPITOLO 2: L'ANATOMIA DELLA PROGRAMMAZIONE DINAMICA</h2>
                        
                        <section>
                            <h3>I 4 Ingredienti Magici (Scoperti nel Tempo)</h3>
                            
                            <div class="insight-box">
                                <h4>üß™ Ingrediente 1: Stati (1950s)</h4>
                                <p><em>"Cosa devo sapere per prendere una decisione?"</em></p>
                                
                                <div class="ascii-art">
EVOLUZIONE DEL CONCETTO:

1950: "Stato = situazione attuale"
      Esempio: "Sono alla posizione i"

1955: "Stato = situazione + storia rilevante"  
      Esempio: "Sono a i, vengo da j"

1960: "Stato = minima info per decidere il futuro"
      Esempio: "Sono a i, ultimo elemento era pari"

VISUALIZZAZIONE:
     Stato Semplice          Stato Complesso
          [i]                [i, ultimo, conteggio]
           ‚Üì                         ‚Üì
    "Dove sono?"         "Dove sono e cosa ho fatto?"
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üß™ Ingrediente 2: Transizioni (1952)</h4>
                                <p><em>"Come passo da uno stato all'altro?"</em></p>
                                
                                <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 15px 0;">
                                    <p><strong>LA DOMANDA CHIAVE DI BELLMAN:</strong><br>
                                    "Se so la soluzione per stati pi√π piccoli, come costruisco quella per stati pi√π grandi?"</p>
                                    
                                    <div style="border: 2px solid #4f46e5; padding: 15px; border-radius: 8px; margin: 10px 0;">
                                        <strong>PATTERN UNIVERSALE SCOPERTO:</strong><br>
                                        Stato[i] = FUNZIONE(<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;Stato[j] per tutti j &lt; i<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;che rispettano i vincoli<br>
                                        )
                                    </div>
                                    
                                    <p><strong>ESEMPI DI FUNZIONI:</strong></p>
                                    <ul>
                                        <li><strong>MAX:</strong> voglio il meglio</li>
                                        <li><strong>MIN:</strong> voglio il minimo</li>
                                        <li><strong>SUM:</strong> voglio contare tutti</li>
                                        <li><strong>OR:</strong> basta uno valido</li>
                                        <li><strong>AND:</strong> devono valere tutti</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üß™ Ingrediente 3: Casi Base (1948)</h4>
                                <p><em>"Dove comincio?"</em></p>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
                                    <div style="text-align: center;">
                                        <strong>Ricorsione Infinita</strong><br>
                                        <div class="ascii-art" style="font-size: 12px; margin: 10px 0;">
F(n)
 ‚Üì
F(n-1)
 ‚Üì
F(n-2)
 ‚Üì
...
 ‚Üì
???
[CRASH!]
                                        </div>
                                    </div>
                                    <div style="text-align: center;">
                                        <strong>Ricorsione con Base</strong><br>
                                        <div class="ascii-art" style="font-size: 12px; margin: 10px 0;">
F(n)
 ‚Üì
F(n-1)
 ‚Üì
F(n-2)
 ‚Üì
...
 ‚Üì
F(0)=0 ‚úì
[SUCCESSO!]
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üß™ Ingrediente 4: Ordine di Calcolo (1953)</h4>
                                <p><em>"In che sequenza risolvo?"</em></p>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
                                    <div>
                                        <strong>1. BOTTOM-UP (Dal basso)</strong>
                                        <pre style="background: #f0f9ff; padding: 10px; border-radius: 6px; font-size: 12px;">
F[0] = 0
F[1] = 1
for i in 2..n:
  F[i] = F[i-1] + F[i-2]
                                        </pre>
                                        <p style="font-size: 14px;"><strong>PRO:</strong> Semplice, no stack<br>
                                        <strong>CON:</strong> Calcola tutto</p>
                                    </div>
                                    <div>
                                        <strong>2. TOP-DOWN (Dall'alto)</strong>
                                        <pre style="background: #f0f9ff; padding: 10px; border-radius: 6px; font-size: 12px;">
def F(n):
  if n in memo:
    return memo[n]
  memo[n] = calcola...
  return memo[n]
                                        </pre>
                                        <p style="font-size: 14px;"><strong>PRO:</strong> Calcola solo necessari<br>
                                        <strong>CON:</strong> Rischio overflow stack</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Interactive DP Anatomy -->
                            <div class="dp-visualizer">
                                <h4>üß¨ Anatomia Interattiva della DP</h4>
                                <div class="vis-controls">
                                    <button class="btn btn-info" onclick="showDPIngredient('stati')">
                                        <i class="fas fa-map-marker"></i> Stati
                                    </button>
                                    <button class="btn btn-info" onclick="showDPIngredient('transizioni')">
                                        <i class="fas fa-arrows-alt"></i> Transizioni
                                    </button>
                                    <button class="btn btn-info" onclick="showDPIngredient('base')">
                                        <i class="fas fa-anchor"></i> Casi Base
                                    </button>
                                    <button class="btn btn-info" onclick="showDPIngredient('ordine')">
                                        <i class="fas fa-sort"></i> Ordine
                                    </button>
                                </div>
                                <div id="dpAnatomyDisplay" style="margin-top: 20px; min-height: 200px;">
                                    <p style="text-align: center; color: #94a3b8;">
                                        Clicca su un ingrediente per esplorarlo
                                    </p>
                                </div>
                            </div>

                            <!-- States Deep Dive -->
                            <div class="insight-box">
                                <h4>üß™ Ingrediente 1: Stati (1950s)</h4>
                                <p><em>"Cosa devo sapere per prendere una decisione?"</em></p>
                            </div>

                            <!-- State Design Exercise -->
                            <div class="recall-exercise">
                                <h4 class="recall-prompt">üéØ Progetta gli Stati</h4>
                                <p>Per ogni problema, identifica quali informazioni deve contenere lo stato:</p>
                                
                                <div style="margin-top: 20px;">
                                    <div style="margin-bottom: 20px;">
                                        <strong>Problema 1: Sottosequenza crescente pi√π lunga</strong>
                                        <input type="text" class="recall-input" style="min-height: 50px; padding: 10px;" 
                                            placeholder="Lo stato deve contenere..." 
                                            id="state-design-1">
                                    </div>
                                    <div style="margin-bottom: 20px;">
                                        <strong>Problema 2: Percorsi in griglia con ostacoli</strong>
                                        <input type="text" class="recall-input" style="min-height: 50px; padding: 10px;" 
                                            placeholder="Lo stato deve contenere..." 
                                            id="state-design-2">
                                    </div>
                                    <button class="btn btn-info" onclick="checkStateDesign()">
                                        <i class="fas fa-check"></i> Verifica Design
                                    </button>
                                    <div id="state-design-feedback" style="margin-top: 15px; display: none;"></div>
                                </div>
                            </div>

                            <!-- Interactive State Transition Builder -->
                            <div class="python-editor-advanced">
                                <div class="editor-header">
                                    <div class="editor-title">
                                        <i class="fas fa-project-diagram"></i>
                                        Costruttore di Transizioni di Stato
                                    </div>
                                    <div class="editor-actions">
                                        <button class="btn btn-run" onclick="runPythonCode('state-transitions')">
                                            <i class="fas fa-play"></i> Esegui
                                        </button>
                                        <button class="btn btn-info" onclick="visualizeStateTransitions()">
                                            <i class="fas fa-eye"></i> Visualizza
                                        </button>
                                    </div>
                                </div>
                                <div class="editor-container">
                                    <div class="editor-pane">
                                        <textarea id="state-transitions-code" class="editor-textarea"># Esplora diverse transizioni di stato

# Esempio 1: Monete - Cambio minimo
def cambio_monete(importo, monete):
    """
    Stato: dp[i] = numero minimo di monete per fare importo i
    Transizione: dp[i] = min(dp[i-moneta] + 1) per ogni moneta
    """
    dp = [float('inf')] * (importo + 1)
    dp[0] = 0  # Caso base
    
    # TODO: Implementa le transizioni
    # for i in range(1, importo + 1):
    #     for moneta in monete:
    #         if i >= moneta:
    #             dp[i] = ???
    
    return dp[importo] if dp[importo] != float('inf') else -1

# Esempio 2: String Edit Distance
def edit_distance(s1, s2):
    """
    Stato: dp[i][j] = distanza tra s1[:i] e s2[:j]
    Transizioni: insert, delete, replace
    """
    m, n = len(s1), len(s2)
    dp = [[0] * (n + 1) for _ in range(m + 1)]
    
    # TODO: Casi base
    # for i in range(m + 1):
    #     dp[i][0] = ???
    # for j in range(n + 1):
    #     dp[0][j] = ???
    
    # TODO: Transizioni
    # for i in range(1, m + 1):
    #     for j in range(1, n + 1):
    #         if s1[i-1] == s2[j-1]:
    #             dp[i][j] = ???
    #         else:
    #             dp[i][j] = ???
    
    return dp[m][n]

# Test
print("Cambio monete (11, [1,5,6]): ", cambio_monete(11, [1, 5, 6]))
print("Edit distance ('kitten', 'sitting'): ", edit_distance('kitten', 'sitting'))</textarea>
                                    </div>
                                    <div class="editor-pane">
                                        <div class="test-results" id="state-transitions-output">
                                            <div style="color: #94a3b8;">
                                                <i class="fas fa-terminal"></i> Output apparir√† qui...
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Order Matters Visualization -->
                            <div class="dp-visualizer">
                                <h4>üéØ L'Ordine √® Fondamentale</h4>
                                <p>Osserva come l'ordine di calcolo influenza il risultato:</p>
                                <div class="vis-controls">
                                    <button class="btn btn-info" onclick="showOrder('bottomup')">
                                        <i class="fas fa-arrow-up"></i> Bottom-Up
                                    </button>
                                    <button class="btn btn-info" onclick="showOrder('topdown')">
                                        <i class="fas fa-arrow-down"></i> Top-Down
                                    </button>
                                    <button class="btn btn-danger" onclick="showOrder('random')">
                                        <i class="fas fa-random"></i> Ordine Casuale (Errore!)
                                    </button>
                                </div>
                                <div id="orderVisualization" style="margin-top: 20px;">
                                    <svg id="orderSvg" width="600" height="400"></svg>
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Altri capitoli seguono lo stesso pattern con componenti interattivi avanzati -->
                    <!-- Per brevit√†, mostro solo la struttura base -->

                    <div id="cap3" class="chapter-content">
                        <h2>üéØ CAPITOLO 3: L'ALGORITMO MENTALE DEFINITIVO</h2>
                        
                        <section>
                            <h3>Il Metodo SPAZIO: Come Pensare in DP</h3>
                            
                            <div class="insight-box">
                                <p>üß† <strong>SPAZIO</strong> √® l'acronimo che ti guider√† nella risoluzione di qualsiasi problema DP:</p>
                                <ul style="margin-top: 15px;">
                                    <li><strong>S</strong> - Stati: "Cosa Caratterizza la Mia Situazione?"</li>
                                    <li><strong>P</strong> - Passaggi: "Come Transito tra Stati?"</li>
                                    <li><strong>A</strong> - Assiomi: "Quali Sono i Casi Base?"</li>
                                    <li><strong>Z</strong> - Zona: "In Che Ordine Calcolo?"</li>
                                    <li><strong>I</strong> - Implementa: "Come Traduco in Codice?"</li>
                                    <li><strong>O</strong> - Ottimizza: "Posso Fare Meglio?"</li>
                                </ul>
                            </div>

                            <div class="insight-box">
                                <h4>üåü S - Stati: "Cosa Caratterizza la Mia Situazione?"</h4>
                                
                                <div style="background: #f0f9ff; padding: 20px; border-radius: 8px; margin: 15px 0;">
                                    <p><strong>PROCESSO MENTALE GUIDATO:</strong></p>
                                    
                                    <div style="margin: 15px 0;">
                                        <p><strong>1. "Cosa sto processando?"</strong></p>
                                        <ul>
                                            <li>‚Üí Sequenza: T[i] = primi i elementi</li>
                                            <li>‚Üí Matrice: T[i][j] = sottomatrice fino a (i,j)</li>
                                            <li>‚Üí Grafo: T[nodo] = soluzione fino a nodo</li>
                                        </ul>
                                    </div>
                                    
                                    <div style="margin: 15px 0;">
                                        <p><strong>2. "Cosa devo ricordare del passato?"</strong></p>
                                        <ul>
                                            <li>‚Üí Ultimo elemento? T[i][ultimo]</li>
                                            <li>‚Üí Risorse usate? T[i][peso_usato]</li>
                                            <li>‚Üí Obiettivi raggiunti? T[i][ha_visto_012]</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="ascii-art">
ESEMPIO VISIVO:
Problema: "Stringhe senza 11"
         ‚Üì
"Devo sapere se l'ultimo era 1!"
         ‚Üì
Stati: T[i][0] = finisce con 0
       T[i][1] = finisce con 1
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üåü P - Passaggi: "Come Transito tra Stati?"</h4>
                                
                                <div style="background: #f0f9ff; padding: 20px; border-radius: 8px; margin: 15px 0;">
                                    <p><strong>LA DOMANDA D'ORO:</strong><br>
                                    "Se sono nello stato X, quali stati posso raggiungere?"</p>
                                </div>
                                
                                <div class="ascii-art">
VISUALIZZAZIONE:
    Stato[i-1][0] ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
                       ‚î£‚îÅ‚îÅ> Stato[i][0]
    Stato[i-1][1] ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ
                       ‚îó‚îÅ‚îÅ> Stato[i][1]

PATTERN COMUNI:
1. SCELTA: prendo/non prendo
   T[i] = max(T[i-1], T[i-2] + val[i])

2. SOMMA: tutti i modi
   T[i] = Œ£ T[j] per j validi

3. ESTREMO: migliore opzione
   T[i] = min/max(T[j] + costo(j‚Üíi))
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üåü A - Assiomi: "Quali Sono i Casi Base?"</h4>
                                
                                <div style="background: #f0f9ff; padding: 20px; border-radius: 8px; margin: 15px 0;">
                                    <p><strong>MENTALIT√Ä:</strong><br>
                                    "Qual √® il problema pi√π piccolo che so risolvere?"</p>
                                </div>
                                
                                <div style="border: 2px solid #4f46e5; padding: 15px; border-radius: 8px; margin: 15px 0;">
                                    <p><strong>TRUCCHI VISIVI:</strong></p>
                                    <ul>
                                        <li><strong>Sequenze:</strong> T[0] = ? Di solito: vuoto = 1 modo</li>
                                        <li><strong>Matrici:</strong> T[0][0] = ? Di solito: cella start = 1</li>
                                        <li><strong>Conteggi:</strong> T[0][x] = ? Di solito: 0 ovunque tranne stato init</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üåü Z - Zona: "In Che Ordine Calcolo?"</h4>
                                
                                <div style="background: #f0f9ff; padding: 20px; border-radius: 8px; margin: 15px 0;">
                                    <p><strong>REGOLA AUREA:</strong><br>
                                    "Prima i sottoproblemi, poi i problemi!"</p>
                                </div>
                                
                                <div class="ascii-art">
VISUALIZZAZIONE ORDINE:
    1‚Üí2‚Üí3‚Üí4‚Üí5  (Sequenze)
    
    1 2 3 4    (Matrici: per righe)
    5 6 7 8
    9 0 1 2
    
    DAG topologico (Grafi)
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üåü I - Implementa: "Come Traduco in Codice?"</h4>
                                
                                <div class="python-editor-advanced">
                                    <div class="editor-header">
                                        <div class="editor-title">
                                            <i class="fas fa-code"></i>
                                            Template Universale DP
                                        </div>
                                    </div>
                                    <div class="editor-container">
                                        <pre style="background: #1e293b; color: #e2e8f0; padding: 20px; border-radius: 8px; overflow-x: auto;">
# TEMPLATE UNIVERSALE DP
def risolvi_dp(input):
    # 1. INIZIALIZZA stati
    dp = crea_tabella()
    
    # 2. CASI BASE (Assiomi)
    inizializza_casi_base(dp)
    
    # 3. RIEMPI seguendo l'ordine (Zona)
    for stato in ordine_corretto():
        # 4. APPLICA transizione (Passaggi)
        for precedente in stati_precedenti_validi(stato):
            dp[stato] = aggiorna(dp[stato], dp[precedente])
    
    # 5. RITORNA soluzione
    return dp[stato_finale]
                                        </pre>
                                    </div>
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üåü O - Ottimizza: "Posso Fare Meglio?"</h4>
                                
                                <div style="background: #f0f9ff; padding: 20px; border-radius: 8px; margin: 15px 0;">
                                    <p><strong>CHECKLIST OTTIMIZZAZIONI:</strong></p>
                                    <ul>
                                        <li>‚òê Servono TUTTI gli stati precedenti? ‚Üí Spesso bastano ultimi 1-2</li>
                                        <li>‚òê Posso evitare stati impossibili? ‚Üí Non calcolarli proprio</li>
                                        <li>‚òê Ci sono simmetrie? ‚Üí Calcola met√†</li>
                                    </ul>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
                                    <div style="text-align: center;">
                                        <strong>PRIMA</strong><br>
                                        <div class="ascii-art" style="font-size: 12px;">
dp[n][m] memoria
O(n√óm)
                                        </div>
                                    </div>
                                    <div style="text-align: center;">
                                        <strong>DOPO</strong><br>
                                        <div class="ascii-art" style="font-size: 12px;">
dp[2][m] memoria
O(m) ‚Üê MEGLIO!
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Interactive SPAZIO Exercise -->
                            <div class="recall-exercise">
                                <h4 class="recall-prompt">üéØ Pratica SPAZIO: Robot in Griglia</h4>
                                <p><strong>Problema:</strong> Robot pu√≤ muoversi destra, gi√π, o salto cavallo (‚Üì‚Üì‚Üí). Quanti percorsi da (0,0) a (n-1,m-1)?</p>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin: 20px 0;">
                                    <div>
                                        <p><strong>S - Stati:</strong></p>
                                        <textarea class="recall-input" style="min-height: 80px;" id="spazio-s" placeholder="T[i][j] = ..."></textarea>
                                    </div>
                                    <div>
                                        <p><strong>P - Passaggi:</strong></p>
                                        <textarea class="recall-input" style="min-height: 80px;" id="spazio-p" placeholder="T[i][j] = ..."></textarea>
                                    </div>
                                    <div>
                                        <p><strong>A - Assiomi:</strong></p>
                                        <textarea class="recall-input" style="min-height: 80px;" id="spazio-a" placeholder="T[0][0] = ..."></textarea>
                                    </div>
                                </div>
                                
                                <button class="btn btn-info" onclick="checkSPAZIO()">
                                    <i class="fas fa-check"></i> Verifica SPAZIO
                                </button>
                                <div id="spazio-feedback" style="margin-top: 15px; display: none;"></div>
                            </div>
                        </section>
                    </div>

                    <div id="cap4" class="chapter-content">
                        <h2>üé® CAPITOLO 4: PATTERN VISIVI - Riconoscere al Volo</h2>
                        
                        <section>
                            <h3>I 7 Pattern che Coprono il 90% dei Problemi</h3>
                            
                            <div class="insight-box">
                                <h4>üìä Pattern 1: Fibonacci Nascosto</h4>
                                <p><strong>SEGNALI:</strong> "dipende da 2 precedenti" + "somma/scelta"</p>
                                
                                <div class="ascii-art">
VISUALIZZAZIONE:
    ‚Ä¢
   / \
  ‚Ä¢   ‚Ä¢    ‚Üê Struttura ricorsiva
 / \ / \
‚Ä¢  ‚Ä¢ ‚Ä¢  ‚Ä¢

ESEMPIO CLASSICO:
"Scale con salti 1-2" = Fibonacci!
T[i] = T[i-1] + T[i-2]
                                </div>
                                
                                <div class="recall-exercise">
                                    <p><strong>üîç Riconosci il Pattern:</strong> Quale di questi √® Fibonacci nascosto?</p>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                                        <div class="practice-option" onclick="checkFibPattern(this, true)">
                                            <strong>Tile 2√ón</strong><br>
                                            <small>Modi di riempire rettangolo con tiles 2√ó1</small>
                                        </div>
                                        <div class="practice-option" onclick="checkFibPattern(this, false)">
                                            <strong>Ordinamento</strong><br>
                                            <small>Ordinare array in ordine crescente</small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üìä Pattern 2: Zaino (Knapsack)</h4>
                                <p><strong>SEGNALI:</strong> "scegli oggetti" + "capacit√† limitata"</p>
                                
                                <div class="ascii-art">
GRIGLIA MENTALE:
         peso ‚Üí
    o  ‚îå‚îÄ‚î¨‚îÄ‚î¨‚îÄ‚î¨‚îÄ‚î¨‚îÄ‚îê
    g  ‚îÇ0‚îÇ0‚îÇ0‚îÇv‚îÇv‚îÇ  v = valore
    g  ‚îú‚îÄ‚îº‚îÄ‚îº‚îÄ‚îº‚îÄ‚îº‚îÄ‚î§     oggetto
    e  ‚îÇ0‚îÇ0‚îÇ0‚îÇv‚îÇv‚îÇ
    t  ‚îú‚îÄ‚îº‚îÄ‚îº‚îÄ‚îº‚îÄ‚îº‚îÄ‚î§
    t  ‚îÇ0‚îÇw‚îÇw‚îÇV‚îÇV‚îÇ  V = valore
    i  ‚îî‚îÄ‚î¥‚îÄ‚î¥‚îÄ‚î¥‚îÄ‚î¥‚îÄ‚îò     migliore
    ‚Üì

T[i][w] = max(T[i-1][w], T[i-1][w-peso[i]] + valore[i])
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üìä Pattern 3: LCS/LIS (Sottosequenze)</h4>
                                <p><strong>SEGNALI:</strong> "sottosequenza" + "propriet√† da mantenere"</p>
                                
                                <div class="ascii-art">
PROCESSO MENTALE:
  Sequenza: 3 1 4 1 5
            ‚Üì ‚Üì ‚Üì ‚Üì ‚Üì
  Prendo?   N S S N S ‚Üí 1,4,5 crescente!

T[i] = max(T[j] + 1) per j<i con A[j]<A[i]
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üìä Pattern 4: Intervalli</h4>
                                <p><strong>SEGNALI:</strong> "substring" + "ottimizza su range"</p>
                                
                                <div class="ascii-art">
TABELLA TRIANGOLARE:
    j ‚Üí
i ‚îå‚îÄ‚î¨‚îÄ‚î¨‚îÄ‚î¨‚îÄ‚îê
‚Üì ‚îÇX‚îÇ ‚îÇ ‚îÇ ‚îÇ  Diagonale = stringhe lunghe 1
  ‚îú‚îÄ‚îº‚îÄ‚îº‚îÄ‚îº‚îÄ‚î§
  ‚îÇX‚îÇX‚îÇ ‚îÇ ‚îÇ  Sopra = stringhe lunghe 2
  ‚îú‚îÄ‚îº‚îÄ‚îº‚îÄ‚îº‚îÄ‚î§
  ‚îÇX‚îÇX‚îÇX‚îÇ ‚îÇ  Ancora sopra = lunghe 3
  ‚îî‚îÄ‚î¥‚îÄ‚î¥‚îÄ‚î¥‚îÄ‚îò

T[i][j] = funzione(T[i+1][j], T[i][j-1], T[i+1][j-1])
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üìä Pattern 5: Alberi/DAG</h4>
                                <p><strong>SEGNALI:</strong> "percorsi" + "grafo aciclico"</p>
                                
                                <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                                    <p><strong>APPROCCIO:</strong><br>
                                    Per ogni nodo in ordine topologico:<br>
                                    &nbsp;&nbsp;T[nodo] = migliore tra:<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;T[pred] + costo(pred‚Üínodo)<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;per ogni predecessore</p>
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üìä Pattern 6: Matrici Cumulative</h4>
                                <p><strong>SEGNALI:</strong> "somma in sottomatrice" + "query multiple"</p>
                                
                                <div class="ascii-art">
PREPROCESSING:
‚îå‚îÄ‚î¨‚îÄ‚î¨‚îÄ‚îê     ‚îå‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îê
‚îÇ1‚îÇ2‚îÇ3‚îÇ     ‚îÇ1‚îÇ3 ‚îÇ6 ‚îÇ
‚îú‚îÄ‚îº‚îÄ‚îº‚îÄ‚î§ ‚Üí   ‚îú‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚î§
‚îÇ4‚îÇ5‚îÇ6‚îÇ     ‚îÇ5‚îÇ12‚îÇ21‚îÇ
‚îî‚îÄ‚î¥‚îÄ‚î¥‚îÄ‚îò     ‚îî‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îò
originale    cumulativa

Somma(r1,c1,r2,c2) = O(1)!
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üìä Pattern 7: Stati Multipli</h4>
                                <p><strong>SEGNALI:</strong> "vincoli complessi" + "storia importante"</p>
                                
                                <div class="ascii-art">
DIMENSIONI EXTRA:
T[pos][ultimo][conteggio][flag]
    ‚Üì      ‚Üì        ‚Üì        ‚Üì
  dove   quale    quanti   propriet√†
  sono   elemento  ne ho    speciali

Esempio: "esattamente k elementi diversi"
T[i][mask][k] = fino a i, elementi usati, conteggio
                                </div>
                            </div>

                            <!-- Pattern Recognition Game -->
                            <div class="recall-exercise">
                                <h4 class="recall-prompt">üéÆ Gioco di Riconoscimento Pattern</h4>
                                <p>Leggi il problema e identifica il pattern corretto:</p>
                                
                                <div id="pattern-game" style="margin: 20px 0;">
                                    <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
                                        <p id="pattern-problem"><strong>Problema:</strong> Trova il numero di modi per salire n gradini, potendo salire 1, 2 o 3 gradini alla volta.</p>
                                    </div>
                                    
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                        <div class="practice-option" onclick="selectPattern(this, 'fibonacci')">
                                            <strong>Fibonacci</strong><br>
                                            <small>Dipende da precedenti</small>
                                        </div>
                                        <div class="practice-option" onclick="selectPattern(this, 'knapsack')">
                                            <strong>Zaino</strong><br>
                                            <small>Scelta con vincoli</small>
                                        </div>
                                        <div class="practice-option" onclick="selectPattern(this, 'lis')">
                                            <strong>Sottosequenza</strong><br>
                                            <small>Mantieni propriet√†</small>
                                        </div>
                                        <div class="practice-option" onclick="selectPattern(this, 'interval')">
                                            <strong>Intervalli</strong><br>
                                            <small>Range di substring</small>
                                        </div>
                                    </div>
                                    
                                    <button class="btn btn-info" onclick="nextPatternProblem()" style="margin-top: 15px;">
                                        <i class="fas fa-forward"></i> Problema Successivo
                                    </button>
                                    <div id="pattern-score" style="margin-top: 10px; font-weight: bold;"></div>
                                </div>
                            </div>

                            <!-- Quick Reference Card -->
                            <div style="background: white; border: 2px solid #4f46e5; border-radius: 12px; padding: 20px; margin: 30px 0;">
                                <h4>üìã Quick Reference: Pattern Cheat Sheet</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
                                    <div>
                                        <strong>üîç FIBONACCI:</strong><br>
                                        "Modi di fare", "Salti", "Combinazioni"
                                    </div>
                                    <div>
                                        <strong>üéí KNAPSACK:</strong><br>
                                        "Scegli oggetti", "Peso/capacit√†", "Massimizza"
                                    </div>
                                    <div>
                                        <strong>üìà LIS/LCS:</strong><br>
                                        "Sottosequenza", "Crescente/comune", "Lunghezza"
                                    </div>
                                    <div>
                                        <strong>üîÑ INTERVALLI:</strong><br>
                                        "Substring", "Palindromi", "Range DP"
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>

                    <div id="cap5" class="chapter-content">
                        <h2>üöÄ CAPITOLO 5: DALLA TEORIA ALLA PRATICA</h2>
                        
                        <section>
                            <h3>Caso Studio Completo: Il Pensiero DP in Azione</h3>
                            
                            <div class="question-box">
                                <h4>üí™ Problema: Robot in Griglia con Salti Speciali</h4>
                                <p><strong>"Un robot in una griglia n√óm pu√≤ muoversi: destra (‚Üí), gi√π (‚Üì), o salto cavallo (‚Üì‚Üì‚Üí). Quanti percorsi da (0,0) a (n-1,m-1)?"</strong></p>
                            </div>

                            <div class="insight-box">
                                <h4>üß† Il Processo Mentale Completo</h4>
                                
                                <h5>Fase 1: Comprensione Visiva</h5>
                                <div class="ascii-art">
DISEGNO IL PROBLEMA:
S ‚Üí ‚Üí ‚Üí ¬∑
‚Üì ‚Üò ¬∑ ¬∑ ¬∑  (‚Üò = salto cavallo)
‚Üì ¬∑ ‚Üò ¬∑ ¬∑
¬∑ ¬∑ ¬∑ ‚Üò G

DOMANDA: "Da dove posso arrivare a G?"
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>Fase 2: Applicazione SPAZIO</h4>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin: 20px 0;">
                                    <div>
                                        <h5>üåü S - Stati:</h5>
                                        <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                                            <p><strong>"Cosa caratterizza la situazione?"</strong><br>
                                            ‚Üí La posizione (i,j) dove sono!</p>
                                            <p><strong>T[i][j]</strong> = numero di percorsi per arrivare a (i,j)</p>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>üåü P - Passaggi:</h5>
                                        <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                                            <p><strong>"Da dove posso arrivare a (i,j)?"</strong></p>
                                            <div class="ascii-art" style="font-size: 12px;">
    (i-1,j)
       ‚Üì
(i,j-1)‚Üí(i,j)
       ‚Üó
  (i-2,j-1)
                                            </div>
                                            <p><strong>T[i][j] = T[i-1][j] + T[i][j-1] + T[i-2][j-1]</strong></p>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>üåü A - Assiomi:</h5>
                                        <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                                            <p><strong>"Casi base?"</strong></p>
                                            <ul style="font-size: 14px;">
                                                <li>T[0][0] = 1 (partenza)</li>
                                                <li>T[i][0] = 1 (solo gi√π)</li>
                                                <li>T[0][j] = 1 (solo destra)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin: 20px 0;">
                                    <div>
                                        <h5>üåü Z - Zona:</h5>
                                        <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                                            <p><strong>"Ordine di calcolo?"</strong><br>
                                            Per righe, da sinistra a destra:</p>
                                            <div class="ascii-art" style="font-size: 10px;">
‚îå‚îÄ‚î¨‚îÄ‚î¨‚îÄ‚î¨‚îÄ‚îê
‚îÇ1‚îÇ2‚îÇ3‚îÇ4‚îÇ
‚îú‚îÄ‚îº‚îÄ‚îº‚îÄ‚îº‚îÄ‚î§
‚îÇ5‚îÇ6‚îÇ7‚îÇ8‚îÇ
‚îî‚îÄ‚î¥‚îÄ‚î¥‚îÄ‚î¥‚îÄ‚îò
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>üåü I - Implementa:</h5>
                                        <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                                            <p><strong>"Codice Python"</strong></p>
                                            <button class="btn btn-info" onclick="showRobotImplementation()">
                                                <i class="fas fa-code"></i> Mostra Codice
                                            </button>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>üåü O - Ottimizza:</h5>
                                        <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                                            <p><strong>"Serve tutta la matrice?"</strong><br>
                                            NO! Bastano ultime 2 righe</p>
                                            <p><strong>Memoria: da O(n√óm) a O(m)!</strong></p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Interactive Implementation -->
                            <div class="python-editor-advanced">
                                <div class="editor-header">
                                    <div class="editor-title">
                                        <i class="fas fa-robot"></i>
                                        Implementazione Completa: Robot in Griglia
                                    </div>
                                    <div class="editor-actions">
                                        <button class="btn btn-run" onclick="runPythonCode('robot-grid')">
                                            <i class="fas fa-play"></i> Esegui
                                        </button>
                                        <button class="btn btn-test" onclick="runTests('robot-grid')">
                                            <i class="fas fa-vial"></i> Test
                                        </button>
                                        <button class="btn btn-solution" onclick="showSolution('robot-grid')">
                                            <i class="fas fa-lightbulb"></i> Soluzione
                                        </button>
                                    </div>
                                </div>
                                <div class="editor-container">
                                    <div class="editor-pane">
                                        <textarea id="robot-grid-code" class="editor-textarea">def percorsi_robot_speciale(n, m):
    """
    Robot pu√≤ muoversi:
    - Destra (‚Üí)
    - Gi√π (‚Üì) 
    - Salto cavallo (‚Üì‚Üì‚Üí)
    
    Quanti percorsi da (0,0) a (n-1,m-1)?
    """
    # TODO: Implementa usando SPAZIO
    
    # S - Stati: T[i][j] = numero percorsi a (i,j)
    
    # P - Passaggi: T[i][j] = T[i-1][j] + T[i][j-1] + T[i-2][j-1]
    
    # A - Assiomi: T[0][0] = 1, bordi = 1
    
    # Z - Zona: per righe, sinistra‚Üídestra
    
    # I - Implementa:
    dp = [[0] * m for _ in range(n)]
    
    # Casi base
    for i in range(n): 
        dp[i][0] = 1  # Primo colonna
    for j in range(m): 
        dp[0][j] = 1  # Prima riga
    
    # Riempi tabella
    for i in range(1, n):
        for j in range(1, m):
            # Da sopra
            dp[i][j] = dp[i-1][j]
            # Da sinistra  
            dp[i][j] += dp[i][j-1]
            # Salto cavallo (se possibile)
            if i >= 2 and j >= 1:
                dp[i][j] += dp[i-2][j-1]
    
    return dp[n-1][m-1]

# Test della funzione
def test_robot():
    print("Robot 3x3:", percorsi_robot_speciale(3, 3))
    print("Robot 4x4:", percorsi_robot_speciale(4, 4))
    print("Robot 2x5:", percorsi_robot_speciale(2, 5))

test_robot()

# Versione ottimizzata (O(m) memoria)
def percorsi_robot_ottimizzato(n, m):
    """
    Versione con memoria O(m) invece di O(n*m)
    """
    # TODO: Implementa versione ottimizzata
    # Usa solo 2 righe: precedente e corrente
    pass</textarea>
                                    </div>
                                    <div class="editor-pane">
                                        <div class="test-results" id="robot-grid-output">
                                            <div style="color: #94a3b8;">
                                                <i class="fas fa-terminal"></i> Output apparir√† qui...
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Visualization of the Process -->
                            <div class="dp-visualizer">
                                <h4>üé® Visualizzazione Step-by-Step</h4>
                                <div class="vis-controls">
                                    <button class="btn btn-info" onclick="startRobotVisualization()">
                                        <i class="fas fa-play"></i> Animazione Riempimento
                                    </button>
                                    <button class="btn btn-warning" onclick="resetRobotVisualization()">
                                        <i class="fas fa-redo"></i> Reset
                                    </button>
                                    <label>Dimensioni: 
                                        <select id="gridSize" onchange="updateGridVisualization()">
                                            <option value="3,3">3√ó3</option>
                                            <option value="4,4">4√ó4</option>
                                            <option value="5,3">5√ó3</option>
                                        </select>
                                    </label>
                                </div>
                                <div class="vis-canvas" id="robotCanvas">
                                    <!-- Grid visualization will be generated here -->
                                </div>
                            </div>

                            <!-- Reflection Exercise -->
                            <div class="recall-exercise">
                                <h4 class="recall-prompt">üìù Riflessione Metacognitiva</h4>
                                <p>Ora che hai visto il processo completo, rifletti:</p>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                                    <div>
                                        <p><strong>1. Quale √® stata la parte pi√π difficile?</strong></p>
                                        <textarea class="recall-input" style="min-height: 80px;" id="reflection-difficult" 
                                            placeholder="Es: Identificare tutti i modi di arrivare a una cella..."></textarea>
                                    </div>
                                    <div>
                                        <p><strong>2. Quale insight ti ha aiutato di pi√π?</strong></p>
                                        <textarea class="recall-input" style="min-height: 80px;" id="reflection-insight" 
                                            placeholder="Es: Disegnare la griglia mi ha fatto capire..."></textarea>
                                    </div>
                                </div>
                                
                                <div style="margin: 20px 0;">
                                    <p><strong>3. Come applicheresti SPAZIO a un problema simile?</strong></p>
                                    <textarea class="recall-input" style="min-height: 100px;" id="reflection-apply" 
                                        placeholder="Es: Se il robot potesse anche muoversi in diagonale..."></textarea>
                                </div>
                                
                                <button class="btn btn-info" onclick="saveReflection('robot-case-study')">
                                    <i class="fas fa-save"></i> Salva Riflessione
                                </button>
                            </div>

                            <!-- Next Steps -->
                            <div style="background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%); padding: 25px; border-radius: 12px; margin: 30px 0;">
                                <h4>üöÄ Prossimi Passi</h4>
                                <p>Ora che hai padroneggiato il processo completo:</p>
                                <ul style="margin: 15px 0;">
                                    <li>‚úÖ Hai visto come applicare SPAZIO metodicamente</li>
                                    <li>‚úÖ Hai implementato una soluzione completa</li>
                                    <li>‚úÖ Hai visto l'ottimizzazione di memoria</li>
                                    <li>üéØ Pronto per i trucchi avanzati dei maestri!</li>
                                </ul>
                                <button class="btn btn-primary" onclick="loadChapter('cap6')">
                                    <i class="fas fa-hat-wizard"></i> Scopri i Trucchi dei Maestri
                                </button>
                            </div>
                        </section>
                    </div>

                    <div id="cap6" class="chapter-content">
                        <h2>üéì CAPITOLO 6: I TRUCCHI DEI MAESTRI</h2>
                        
                        <section>
                            <h3>Le Tecniche Segrete dei Campioni</h3>
                            
                            <div class="insight-box">
                                <h4>üé≠ Trucco 1: "La Dimensione Nascosta"</h4>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                                    <div>
                                        <h5>PENSIERO NOVIZIO:</h5>
                                        <div style="background: #fef3c7; padding: 15px; border-radius: 8px;">
                                            <p><strong>Problema:</strong> "Conta sottosequenze crescenti"</p>
                                            <p><strong>Soluzione:</strong> T[i] = numero fino a posizione i</p>
                                            <div class="ascii-art" style="font-size: 12px;">
[?][?][?]
 ‚Üë
ambiguo!
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>PENSIERO ESPERTO:</h5>
                                        <div style="background: #d1fae5; padding: 15px; border-radius: 8px;">
                                            <p><strong>Insight:</strong> "Aspetta... devo sapere L'ULTIMO elemento!"</p>
                                            <p><strong>Soluzione:</strong> T[i][j] = numero fino a i che finiscono con j</p>
                                            <div class="ascii-art" style="font-size: 12px;">
[3][0][0]
 ‚Üë  ‚Üë  ‚Üë
finisce con 0,1,2
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="recall-exercise">
                                    <h5>üß† Pratica Dimensione Nascosta</h5>
                                    <p><strong>Problema:</strong> "Stringhe binarie di lunghezza n senza '11' consecutivi"</p>
                                    <p>Quale dimensione aggiuntiva serve?</p>
                                    
                                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin: 15px 0;">
                                        <div class="practice-option" onclick="checkDimension(this, false)">
                                            T[i] = stringhe di lunghezza i
                                        </div>
                                        <div class="practice-option" onclick="checkDimension(this, true)">
                                            T[i][last] = stringhe lunghe i che finiscono con 'last'
                                        </div>
                                        <div class="practice-option" onclick="checkDimension(this, false)">
                                            T[i][count] = stringhe con 'count' uni
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üé≠ Trucco 2: "Stati Impossibili"</h4>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                                    <div>
                                        <h5>‚ùå NOVIZIO: calcola tutto</h5>
                                        <pre style="background: #fef3c7; padding: 15px; border-radius: 8px; font-size: 12px;">
for i in range(n):
    for j in range(m):
        dp[i][j] = calcola()
        
# Calcola n√óm stati
                                        </pre>
                                    </div>
                                    <div>
                                        <h5>‚úÖ ESPERTO: salta impossibili</h5>
                                        <pre style="background: #d1fae5; padding: 15px; border-radius: 8px; font-size: 12px;">
for i in range(n):
    for j in range(min(i+1, m)):  # j ‚â§ i
        if √®_possibile(i, j):
            dp[i][j] = calcola()
            
# Risparmio: fino a 50% del tempo!
                                        </pre>
                                    </div>
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üé≠ Trucco 3: "La Ricorsione con Memoria"</h4>
                                <p><em>Quando bottom-up √® complicato, usa top-down!</em></p>
                                
                                <div class="python-editor-advanced">
                                    <div class="editor-header">
                                        <div class="editor-title">
                                            <i class="fas fa-magic"></i>
                                            Template Top-Down Magico
                                        </div>
                                    </div>
                                    <div class="editor-container">
                                        <pre style="background: #1e293b; color: #e2e8f0; padding: 20px; border-radius: 8px; overflow-x: auto;">
from functools import lru_cache

@lru_cache(maxsize=None)
def dp(stato):
    # Caso base
    if stato == base:
        return valore_base
    
    # Ricorsione
    risultato = neutro
    for prossimo in successori(stato):
        risultato = combina(risultato, dp(prossimo))
    
    return risultato

# Magia: calcola solo stati raggiungibili!
                                        </pre>
                                    </div>
                                </div>
                                
                                <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                                    <p><strong>ü™Ñ MAGIA:</strong> Questo pattern funziona quando:</p>
                                    <ul>
                                        <li>‚úÖ Non tutti gli stati sono raggiungibili</li>
                                        <li>‚úÖ L'ordine di calcolo √® complicato</li>
                                        <li>‚úÖ Vuoi scrivere codice pi√π leggibile</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üé≠ Trucco 4: "Rolling Array Pattern"</h4>
                                <p><em>Ottimizzazione di memoria quando serve solo "window" di stati</em></p>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                                    <div>
                                        <h5>PRIMA: O(n√óm) memoria</h5>
                                        <pre style="background: #fef3c7; padding: 15px; border-radius: 8px; font-size: 12px;">
dp = [[0]*m for _ in range(n)]

for i in range(n):
    for j in range(m):
        dp[i][j] = funzione(
            dp[i-1][j],
            dp[i][j-1]
        )
                                        </pre>
                                    </div>
                                    <div>
                                        <h5>DOPO: O(m) memoria</h5>
                                        <pre style="background: #d1fae5; padding: 15px; border-radius: 8px; font-size: 12px;">
prev = [0] * m
curr = [0] * m

for i in range(n):
    for j in range(m):
        curr[j] = funzione(
            prev[j],
            curr[j-1]
        )
    prev, curr = curr, prev
                                        </pre>
                                    </div>
                                </div>
                            </div>

                            <div class="insight-box">
                                <h4>üé≠ Trucco 5: "Coordinate Compression"</h4>
                                <p><em>Quando lo spazio √® enorme ma i valori sono pochi</em></p>
                                
                                <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 15px 0;">
                                    <p><strong>SCENARIO:</strong> "DP su range [1, 10^9] ma solo 1000 valori distinti"</p>
                                    
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                                        <div>
                                            <strong>‚ùå INGENUO:</strong>
                                            <pre style="background: #fef3c7; padding: 10px; border-radius: 6px; font-size: 11px;">
dp = [0] * (10**9)  # CRASH!
                                            </pre>
                                        </div>
                                        <div>
                                            <strong>‚úÖ COMPRESSO:</strong>
                                            <pre style="background: #d1fae5; padding: 10px; border-radius: 6px; font-size: 11px;">
valori_unici = sorted(set(input))
mappa = {v: i for i, v in enumerate(valori_unici)}
dp = [0] * len(valori_unici)
                                            </pre>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Master's Challenge -->
                            <div class="recall-exercise">
                                <h4 class="recall-prompt">üèÜ La Sfida del Maestro</h4>
                                <p><strong>Problema Avanzato:</strong> "Contare percorsi in griglia n√óm evitando celle [marked], con massimo k salti magici"</p>
                                
                                <div style="margin: 20px 0;">
                                    <p><strong>üß† Progetta gli stati usando i trucchi dei maestri:</strong></p>
                                    
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                                        <div>
                                            <label><strong>1. Dimensioni necessarie:</strong></label>
                                            <textarea class="recall-input" style="min-height: 80px;" id="master-dimensions" 
                                                placeholder="T[i][j][...] = ..."></textarea>
                                        </div>
                                        <div>
                                            <label><strong>2. Come eviti stati impossibili:</strong></label>
                                            <textarea class="recall-input" style="min-height: 80px;" id="master-optimization" 
                                                placeholder="if condizione_validit√†:..."></textarea>
                                        </div>
                                    </div>
                                    
                                    <div style="margin: 15px 0;">
                                        <label><strong>3. Ricorsione top-down o bottom-up? Perch√©?</strong></label>
                                        <textarea class="recall-input" style="min-height: 80px;" id="master-approach" 
                                            placeholder="Scelgo... perch√©..."></textarea>
                                    </div>
                                </div>
                                
                                <button class="btn btn-info" onclick="checkMasterChallenge()">
                                    <i class="fas fa-trophy"></i> Sottoponi alla Valutazione del Maestro
                                </button>
                                <div id="master-feedback" style="margin-top: 15px; display: none;"></div>
                            </div>

                            <!-- Quick Tips Card -->
                            <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 25px; border-radius: 12px; margin: 30px 0;">
                                <h4>‚ö° Quick Tips dal Maestro</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                                    <div>
                                        <p><strong>üî• Performance:</strong></p>
                                        <ul style="font-size: 14px;">
                                            <li>Profila PRIMA di ottimizzare</li>
                                            <li>Memoria spesso pi√π importante di tempo</li>
                                            <li>Cache locality matters</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p><strong>üß† Debugging:</strong></p>
                                        <ul style="font-size: 14px;">
                                            <li>Stampa tabella DP piccola</li>
                                            <li>Verifica casi base per primi</li>
                                            <li>Traccia uno stato manualmente</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- Advanced Patterns -->
                            <div style="background: white; border: 2px solid #6366f1; border-radius: 12px; padding: 20px; margin: 30px 0;">
                                <h4>üé® Pattern Avanzati per i Maestri</h4>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-top: 15px;">
                                    <div>
                                        <h5>üåä Monotonic Queue DP</h5>
                                        <p style="font-size: 14px;">Per ottimizzazioni O(n¬≤) ‚Üí O(n)</p>
                                        <code style="background: #f0f9ff; padding: 2px 6px; border-radius: 4px; font-size: 12px;">
                                            deque per min/max sliding window
                                        </code>
                                    </div>
                                    <div>
                                        <h5>üå≥ Tree DP</h5>
                                        <p style="font-size: 14px;">Stati per ogni sottoalbero</p>
                                        <code style="background: #f0f9ff; padding: 2px 6px; border-radius: 4px; font-size: 12px;">
                                            DFS + memoization su nodi
                                        </code>
                                    </div>
                                    <div>
                                        <h5>üéØ Digit DP</h5>
                                        <p style="font-size: 14px;">Contare numeri con propriet√†</p>
                                        <code style="background: #f0f9ff; padding: 2px 6px; border-radius: 4px; font-size: 12px;">
                                            tight, pos, started flags
                                        </code>
                                    </div>
                                    <div>
                                        <h5>üé≠ Bitmask DP</h5>
                                        <p style="font-size: 14px;">Subset come stato</p>
                                        <code style="background: #f0f9ff; padding: 2px 6px; border-radius: 4px; font-size: 12px;">
                                            T[mask] = dp su subset
                                        </code>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>

                    <div id="epilogo" class="chapter-content">
                        <h2>üìö EPILOGO: IL TUO VIAGGIO CONTINUA</h2>
                        
                        <section>
                            <div class="insight-box">
                                <h3>üó∫Ô∏è La Mappa del Tesoro per la Maestria</h3>
                                
                                <div class="ascii-art">
         INIZIO
           ‚Üì
    [Riconosci Pattern]
           ‚Üì
    [Applica SPAZIO]
           ‚Üì
    [Implementa Base]
           ‚Üì
    [Ottimizza dopo]
           ‚Üì
       VITTORIA!
                                </div>
                            </div>

                            <h3>Le 3 Verit√† Finali</h3>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0;">
                                <div class="insight-box">
                                    <h4>1Ô∏è‚É£ "La DP √® Memorizzazione Organizzata"</h4>
                                    <p>Non √® magia. √à semplicemente ricordare in modo intelligente.</p>
                                    <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin-top: 15px;">
                                        <p><strong>üß† Ricorda sempre:</strong><br>
                                        Se hai calcolato qualcosa una volta, non calcolarlo mai pi√π.</p>
                                    </div>
                                </div>
                                
                                <div class="insight-box">
                                    <h4>2Ô∏è‚É£ "Il 90% sono Variazioni di Pattern Noti"</h4>
                                    <p>Non reinventare. Riconosci e adatta.</p>
                                    <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin-top: 15px;">
                                        <p><strong>üîç I pattern che hai imparato:</strong><br>
                                        Fibonacci, Knapsack, LIS/LCS, Intervalli, DAG, Cumulativi, Stati Multipli</p>
                                    </div>
                                </div>
                                
                                <div class="insight-box">
                                    <h4>3Ô∏è‚É£ "La Visualizzazione √® la Chiave"</h4>
                                    <p>Se puoi disegnarlo, puoi risolverlo.</p>
                                    <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin-top: 15px;">
                                        <p><strong>‚úèÔ∏è Il tuo processo:</strong><br>
                                        Disegna ‚Üí SPAZIO ‚Üí Implementa ‚Üí Ottimizza</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Personal Progress Review -->
                            <div class="recall-exercise">
                                <h4 class="recall-prompt">üéØ La Tua Missione Finale</h4>
                                <p>Ora hai nelle mani lo stesso potere che Bellman scopr√¨ nel 1953. La capacit√† di vedere attraverso la complessit√† e trovare la struttura nascosta.</p>
                                
                                <div style="margin: 20px 0;">
                                    <p><strong>üìù Rifletti sul tuo viaggio:</strong></p>
                                    
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                                        <div>
                                            <label><strong>Qual √® stato il tuo momento "eureka"?</strong></label>
                                            <textarea class="recall-input" style="min-height: 100px;" id="eureka-moment" 
                                                placeholder="Il momento in cui tutto ha fatto click..."></textarea>
                                        </div>
                                        <div>
                                            <label><strong>Quale pattern trovi pi√π affascinante?</strong></label>
                                            <textarea class="recall-input" style="min-height: 100px;" id="favorite-pattern" 
                                                placeholder="Fibonacci, Knapsack, LIS..."></textarea>
                                        </div>
                                    </div>
                                    
                                    <div style="margin: 20px 0;">
                                        <label><strong>Quale problema DP vorresti risolvere ora?</strong></label>
                                        <textarea class="recall-input" style="min-height: 80px;" id="next-challenge" 
                                            placeholder="Descrivi un problema che vorresti affrontare..."></textarea>
                                    </div>
                                </div>
                                
                                <button class="btn btn-info" onclick="saveJourneyReflection()">
                                    <i class="fas fa-heart"></i> Salva la Tua Storia
                                </button>
                            </div>

                            <!-- Next Steps Roadmap -->
                            <div style="background: linear-gradient(135deg, #4f46e5 0%, #ec4899 100%); color: white; padding: 30px; border-radius: 12px; margin: 30px 0;">
                                <h4>üöÄ La Tua Roadmap di Apprendimento</h4>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                                    <div>
                                        <h5>üìö Prossime 2 Settimane</h5>
                                        <ul style="font-size: 14px;">
                                            <li>‚úÖ Risolvi 5 problemi Fibonacci</li>
                                            <li>‚úÖ Padroneggia il pattern Knapsack</li>
                                            <li>‚úÖ Implementa 3 LIS variations</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h5>üéØ Prossimo Mese</h5>
                                        <ul style="font-size: 14px;">
                                            <li>üèãÔ∏è Problemi di difficolt√† media</li>
                                            <li>üß† Spaced repetition quotidiana</li>
                                            <li>üìä Traccia i tuoi progressi</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h5>üèÜ Prossimi 3 Mesi</h5>
                                        <ul style="font-size: 14px;">
                                            <li>üí™ Contest programming</li>
                                            <li>üåü Pattern avanzati</li>
                                            <li>üë®‚Äçüè´ Insegna ad altri!</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- Bellman's Final Quote -->
                            <div style="background: #f8fafc; border: 3px solid #4f46e5; border-radius: 12px; padding: 25px; margin: 30px 0; text-align: center;">
                                <p style="font-size: 1.2rem; font-style: italic; margin-bottom: 15px;">
                                    <strong>"La programmazione dinamica √® sia un metodo matematico di ottimizzazione sia un paradigma di programmazione. In entrambi i contesti si riferisce a semplificare un problema complicato scomponendolo in sottoproblemi pi√π semplici."</strong>
                                </p>
                                <p style="font-weight: 600; color: #4f46e5;">
                                    - Richard Bellman, l'uomo che ha iniziato tutto
                                </p>
                            </div>

                            <!-- Final Challenge -->
                            <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 30px; border-radius: 12px; margin: 30px 0; text-align: center;">
                                <h4>üèÜ Il Tuo Certificato di Maestria</h4>
                                <p style="margin: 20px 0;">Hai completato il viaggio dalla curiosit√† alla maestria. Ogni problema DP √® ora un puzzle che sai risolvere.</p>
                                
                                <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 8px; margin: 20px 0;">
                                    <p><strong>üéì Certifico che hai padroneggiato:</strong></p>
                                    <ul style="text-align: left; max-width: 400px; margin: 15px auto;">
                                        <li>‚úÖ Il metodo SPAZIO</li>
                                        <li>‚úÖ I 7 pattern essenziali</li>
                                        <li>‚úÖ I trucchi dei maestri</li>
                                        <li>‚úÖ L'implementazione pratica</li>
                                        <li>‚úÖ L'ottimizzazione avanzata</li>
                                    </ul>
                                </div>
                                
                                <button class="btn" style="background: white; color: #10b981; font-weight: bold; padding: 15px 30px;" onclick="generateCertificate()">
                                    <i class="fas fa-download"></i> Genera il Tuo Certificato
                                </button>
                            </div>

                            <!-- Final Call to Action -->
                            <div style="text-align: center; margin: 40px 0;">
                                <h3 style="color: #4f46e5; margin-bottom: 20px;">**Vai e conquista! üöÄ**</h3>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 30px 0;">
                                    <button class="btn btn-primary" onclick="startPracticeSession()">
                                        <i class="fas fa-dumbbell"></i> Inizia Pratica
                                    </button>
                                    <button class="btn btn-info" onclick="exploreAdvancedTopics()">
                                        <i class="fas fa-rocket"></i> Argomenti Avanzati
                                    </button>
                                    <button class="btn btn-success" onclick="joinCommunity()">
                                        <i class="fas fa-users"></i> Unisciti alla Community
                                    </button>
                                    <button class="btn btn-warning" onclick="becomeTeacher()">
                                        <i class="fas fa-chalkboard-teacher"></i> Diventa Insegnante
                                    </button>
                                </div>
                            </div>
                        </section>
                    </div>
                    </div>
                </div>

                <!-- Practice Mode Content -->
                <div id="practiceMode" class="mode-content" style="display: none;">
                    <h2>üèãÔ∏è Modalit√† Pratica</h2>
                    
                    <div class="practice-mode-selector">
                        <h3>Scegli il tipo di pratica:</h3>
                        <div class="practice-options">
                            <div class="practice-option" onclick="startPractice('focused')">
                                <i class="fas fa-bullseye fa-2x"></i>
                                <h4>Pratica Focalizzata</h4>
                                <p>Esercizi su un singolo pattern DP</p>
                            </div>
                            <div class="practice-option" onclick="startPractice('mixed')">
                                <i class="fas fa-random fa-2x"></i>
                                <h4>Pratica Mista</h4>
                                <p>Mix di problemi da tutti i capitoli</p>
                            </div>
                            <div class="practice-option" onclick="startPractice('adaptive')">
                                <i class="fas fa-brain fa-2x"></i>
                                <h4>Pratica Adattiva</h4>
                                <p>Difficolt√† basata sulle tue performance</p>
                            </div>
                        </div>
                    </div>

                    <div id="practiceContent" style="display: none;">
                        <!-- Dynamic practice content loaded here -->
                    </div>
                </div>

                <!-- Review Mode Content -->
                <div id="reviewMode" class="mode-content" style="display: none;">
                    <h2>üìö Modalit√† Ripasso</h2>
                    
                    <div class="metacognitive-dashboard">
                        <div class="meta-card">
                            <h3>üìä Heatmap dei Progressi</h3>
                            <p>Ultimi 30 giorni di attivit√†</p>
                            <div class="heatmap" id="progressHeatmap"></div>
                        </div>
                        
                        <div class="meta-card">
                            <h3>üéØ Aree di Forza</h3>
                            <canvas id="strengthChart" width="300" height="200"></canvas>
                        </div>
                        
                        <div class="meta-card">
                            <h3>‚ö†Ô∏è Aree da Migliorare</h3>
                            <div id="weaknessAreas"></div>
                        </div>
                        
                        <div class="meta-card">
                            <h3>üìà Trend di Apprendimento</h3>
                            <canvas id="learningTrend" width="300" height="200"></canvas>
                        </div>
                    </div>

                    <div class="spaced-repetition-card" style="margin-top: 30px;">
                        <h3>üîÑ Coda di Ripasso Intelligente</h3>
                        <p>Basata sull'algoritmo di spaced repetition</p>
                        <div id="reviewQueue" style="margin-top: 20px;">
                            <!-- Dynamic review items -->
                        </div>
                        <button class="btn btn-info" style="width: 100%; margin-top: 15px;" onclick="startSmartReview()">
                            <i class="fas fa-play"></i> Inizia Sessione di Ripasso
                        </button>
                    </div>
                </div>
            </main>

            <!-- Right Sidebar -->
            <aside class="right-sidebar">
                <!-- Spaced Repetition Card -->
                <div class="spaced-repetition-card">
                    <h3>üß† Ripasso Intelligente</h3>
                    <div class="review-stats">
                        <div class="stat-box">
                            <div class="stat-value" id="dueToday">0</div>
                            <div class="stat-label">Da ripassare oggi</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="streak">0</div>
                            <div class="stat-label">Giorni consecutivi</div>
                        </div>
                    </div>
                    <div class="review-queue">
                        <h4 style="margin-top: 20px; margin-bottom: 10px;">Prossimi ripassi:</h4>
                        <div id="upcomingReviews">
                            <!-- Dynamic content -->
                        </div>
                    </div>
                    <button class="btn btn-success" style="width: 100%; margin-top: 15px;" onclick="startReview()">
                        <i class="fas fa-redo"></i> Inizia Ripasso
                    </button>
                </div>

                <!-- Progress Overview -->
                <div class="spaced-repetition-card">
                    <h3>üìä I Tuoi Progressi</h3>
                    <div style="margin-top: 20px;">
                        <div class="difficulty-indicator">
                            <span>Livello Attuale:</span>
                            <div class="difficulty-bar">
                                <div class="difficulty-fill" id="currentLevel" style="width: 30%"></div>
                            </div>
                            <small id="levelLabel">Principiante</small>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <strong>Statistiche:</strong>
                            <ul style="margin-top: 10px; padding-left: 20px;">
                                <li>Problemi risolti: <strong id="problemsSolved">0</strong></li>
                                <li>Tasso successo: <strong id="successRate">0%</strong></li>
                                <li>Tempo medio: <strong id="avgTime">0s</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="spaced-repetition-card">
                    <h3>‚ö° Azioni Rapide</h3>
                    <div style="margin-top: 15px; display: flex; flex-direction: column; gap: 10px;">
                        <button class="btn btn-info" onclick="showAnnotations()">
                            <i class="fas fa-sticky-note"></i> Le Mie Note
                        </button>
                        <button class="btn btn-warning" onclick="showMistakes()">
                            <i class="fas fa-exclamation-triangle"></i> Errori Comuni
                        </button>
                        <button class="btn btn-success" onclick="exportProgress()">
                            <i class="fas fa-download"></i> Esporta Progressi
                        </button>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- Focus Mode Toggle -->
    <div class="focus-mode-toggle" onclick="toggleFocusMode()" title="Modalit√† Focus">
        <i class="fas fa-compress" id="focusIcon"></i>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div class="shortcuts-modal" id="shortcutsModal">
        <h3>‚å®Ô∏è Scorciatoie da Tastiera</h3>
        <div style="margin-top: 20px;">
            <div class="shortcut-item">
                <span>Navigazione capitoli</span>
                <span class="shortcut-key">‚Üê ‚Üí</span>
            </div>
            <div class="shortcut-item">
                <span>Esegui codice</span>
                <span class="shortcut-key">Ctrl + Enter</span>
            </div>
            <div class="shortcut-item">
                <span>Modalit√† focus</span>
                <span class="shortcut-key">F</span>
            </div>
            <div class="shortcut-item">
                <span>Cambio tema</span>
                <span class="shortcut-key">T</span>
            </div>
            <div class="shortcut-item">
                <span>Ricerca</span>
                <span class="shortcut-key">Ctrl + K</span>
            </div>
            <div class="shortcut-item">
                <span>Aiuto</span>
                <span class="shortcut-key">?</span>
            </div>
        </div>
        <button class="btn btn-info" style="margin-top: 20px; width: 100%;" onclick="closeShortcuts()">
            Chiudi
        </button>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- Scripts -->
    <!-- JavaScript Personalizzato -->
    <script type="module" src="assets/js/app.js"></script>
    
    <!-- Emergency loading fix script -->
    <script>
        console.log('üö® Emergency script loaded');
        
        // Force hide loading after 2 seconds regardless of anything else
        setTimeout(function() {
            console.log('üîß Emergency timeout: hiding loading overlay');
            var loading = document.getElementById('loadingOverlay');
            if (loading) {
                loading.style.display = 'none';
                console.log('‚úÖ Loading overlay hidden by emergency script');
            }
        }, 2000);
        
        // Additional safety check
        window.addEventListener('load', function() {
            setTimeout(function() {
                var loading = document.getElementById('loadingOverlay');
                if (loading && loading.style.display !== 'none') {
                    loading.style.display = 'none';
                    console.log('‚úÖ Loading overlay hidden by window.load event');
                }
            }, 1000);
        });
        
        // Make emergency function globally available immediately
        window.emergencyHideLoading = function() {
            var loading = document.getElementById('loadingOverlay');
            if (loading) {
                loading.style.display = 'none';
                loading.style.visibility = 'hidden';
                loading.style.opacity = '0';
                console.log('üö® Emergency hide loading executed');
            }
        };
        
        console.log('üîß Emergency function available: window.emergencyHideLoading()');
    </script>
</body>
</html>
